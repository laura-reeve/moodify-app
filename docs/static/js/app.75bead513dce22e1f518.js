webpackJsonp([1],{9585:function(e,t){},KlBe:function(e,t){},NHnr:function(e,t,n){"use strict";function o(e){n("x/0z")}function r(e){n("9585")}function a(e){n("KlBe")}Object.defineProperty(t,"__esModule",{value:!0});var i=n("7+uW"),s={name:"App"},u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},c=[],l={render:u,staticRenderFns:c},p=l,d=n("VU/8"),h=o,m=d(s,p,!1,h,null,null),f=m.exports,v=n("/ocq"),_={name:"Login",data:function(){return{results:null,errors:[],access_token:this.$route.hash.substring(1)}},methods:{getHashParams:function(){for(var e,t={},n=/([^&;=]+)=?([^&;]*)/g,o=window.location.hash.substring(1);e=n.exec(o);)t[e[1]]=decodeURIComponent(e[2]);return t},generateRandomString:function(e){for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",o=0;o<e;o++)t+=n.charAt(Math.floor(Math.random()*n.length));return t},authorize:function(e){var t=this.generateRandomString(16);localStorage.setItem(e,t);var n="https://accounts.spotify.com/authorize";n+="?response_type=token",n+="&client_id="+encodeURIComponent("2acb1bf4bb054c3a9d24c0256833c1a7"),n+="&scope="+encodeURIComponent("user-read-private user-read-email"),n+="&redirect_uri="+encodeURIComponent("https://moodify-app.firebaseapp.com/authorize"),n+="&state="+encodeURIComponent(t),window.location=n},login:function(){var e=(document.getElementById("user-profile-template").innerHTML,document.getElementById("user-profile")),t=(document.getElementById("oauth-template").innerHTML,document.getElementById("oauth"),"spotify_auth_state"),n=this.getHashParams(),o=localStorage.getItem(t);this.access_token.length>0&&(null==n.state||n.state!==o)?alert("There was an error during the authentication"):(localStorage.removeItem(t),this.access_token.length>0?axios.get({url:"https://api.spotify.com/v1/me",headers:{Authorization:"Bearer "+access_token},success:function(t){e.innerHTML=userProfileTemplate(t),window.location.replace("http://moodify-app.firebaseapp.com/authorize")}}):console.log("Authentication needed, retreiving access token.")),this.authorize(t)}}},g=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._m(0),e._v(" "),n("h1",[e._v("Moodify")]),e._v(" "),n("p",[e._v("Music to suit your mood.")]),e._v(" "),n("p",[e._v("You must log in to Spotify to use this app.")]),e._v(" "),n("p",[n("button",{attrs:{id:"login-button"},on:{click:e.login}},[e._v("Login")])])])},y=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"login"}},[n("div",{attrs:{id:"user-profile-template"}}),e._v(" "),n("div",{attrs:{id:"user-profile"}}),e._v(" "),n("div",{attrs:{id:"oauth-template"}}),e._v(" "),n("div",{attrs:{id:"oauth"}})])}],b={render:g,staticRenderFns:y},z=b,k=n("VU/8"),I=r,M=k(_,z,!1,I,"data-v-dd2ada30",null),w=M.exports,R=n("mtWM"),x=n.n(R),A={name:"Moodify",data:function(){return{results:[],errors:[],query:"",access_token:this.$route.hash.substring(1)}},methods:{getPlaylist:function(){var e=this,t={headers:{Authorization:"Bearer ".concat(this.access_token)}},n="https://api.spotify.com/v1/search?type=playlist&q="+this.query,o=this;x.a.get(n,t).then(function(e){o.results=e.data.playlists.items}).catch(function(t){e.errors.push(t)})}}},q=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{attrs:{id:"loggedIn"}},[n("p",[e._v("Music for your Mood")]),e._v(" "),n("p",[e._v("This is a playlist based on "+e._s(e.query))]),e._v(" "),n("form",{on:{submit:function(t){t.preventDefault(),e.getPlaylist(t)}}},[n("p",[e._v("I'm feeling like..."),n("input",{directives:[{name:"model",rawName:"v-model.lazy",value:e.query,expression:"query",modifiers:{lazy:!0}}],attrs:{type:"text",placeholder:"something"},domProps:{value:e.query},on:{change:function(t){e.query=t.target.value}}}),n("button",{attrs:{type:"submit"}},[e._v("Go")])])]),e._v(" "),e.results&&e.results.length>0?n("ul",e._l(e.results,function(t){return n("li",[n("p",[e._v(e._s(t.name))]),e._v(" "),n("p",[e._v(e._s(t.tracks))])])})):e._e()])])},E=[],U={render:q,staticRenderFns:E},B=U,H=n("VU/8"),P=a,T=H(A,B,!1,P,"data-v-289a13c2",null),$=T.exports,L={name:"Authorize",created:function(){console.log("Authorization token created")},data:function(){var e=location.hash.split("&").map(function(e){return e.split("=")}).reduce(function(e,t){return e[t[0]]=t[1],e},{}),t=e["#access_token"];return this.$router.push({path:"/moodify#"+t}),{}},methods:{}},S=function(){var e=this,t=e.$createElement;return(e._self._c||t)("div")},C=[],F={render:S,staticRenderFns:C},V=F,N=n("VU/8"),K=N(L,V,!1,null,null,null),W=K.exports;i.a.use(v.a);var j=new v.a({mode:"history",routes:[{path:"/",name:"Login",component:w},{path:"/moodify",name:"Moodify",component:$},{path:"/authorize",name:"Authorize",component:W}]});i.a.config.productionTip=!1,new i.a({el:"#app",router:j,template:"<App/>",components:{App:f}})},"x/0z":function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.75bead513dce22e1f518.js.map