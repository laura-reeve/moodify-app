webpackJsonp([1],{"+Al0":function(t,e,n){t.exports=n.p+"static/img/happy.a84d295.png"},"/qur":function(t,e,n){t.exports=n.p+"static/img/cool.d93d74d.png"},"6HYP":function(t,e,n){t.exports=n.p+"static/img/meh.270c9f2.png"},"8fw7":function(t,e){},NHnr:function(t,e,n){"use strict";function o(t){n("x/0z")}function s(t){n("mcsh")}function r(t){n("8fw7")}function i(t){n("aKVN")}Object.defineProperty(e,"__esModule",{value:!0});var a=n("7+uW"),c={name:"App"},l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},u=[],p={render:l,staticRenderFns:u},d=p,h=n("VU/8"),m=o,f=h(c,d,!1,m,null,null),v=f.exports,g=n("/ocq"),_={name:"Login",data:function(){return{results:null,errors:[],access_token:this.$route.hash.substring(1)}},methods:{getHashParams:function(){for(var t,e={},n=/([^&;=]+)=?([^&;]*)/g,o=window.location.hash.substring(1);t=n.exec(o);)e[t[1]]=decodeURIComponent(t[2]);return e},generateRandomString:function(t){for(var e="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",o=0;o<t;o++)e+=n.charAt(Math.floor(Math.random()*n.length));return e},authorize:function(t){var e=this.generateRandomString(16);localStorage.setItem(t,e);var n="https://accounts.spotify.com/authorize";n+="?response_type=token",n+="&client_id="+encodeURIComponent("2acb1bf4bb054c3a9d24c0256833c1a7"),n+="&scope="+encodeURIComponent("user-read-private user-read-email"),n+="&redirect_uri="+encodeURIComponent("https://moodify-app.firebaseapp.com/authorize"),n+="&state="+encodeURIComponent(e),window.location=n},login:function(){var t=(document.getElementById("user-profile-template").innerHTML,document.getElementById("user-profile")),e=(document.getElementById("oauth-template").innerHTML,document.getElementById("oauth"),"spotify_auth_state"),n=this.getHashParams(),o=localStorage.getItem(e);this.access_token.length>0&&(null==n.state||n.state!==o)?alert("There was an error during the authentication"):(localStorage.removeItem(e),this.access_token.length>0?axios.get({url:"https://api.spotify.com/v1/me",headers:{Authorization:"Bearer "+access_token},success:function(e){t.innerHTML=userProfileTemplate(e),window.location.replace("http://moodify-app.firebaseapp.com/authorize")}}):console.log("Authentication needed, retreiving access token.")),this.authorize(e)}}},y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._m(0),t._v(" "),n("h1",[t._v("Moodify")]),t._v(" "),n("p",[t._v("Music to suit your mood.")]),t._v(" "),n("p",[t._v("You must log in to Spotify to use this app.")]),t._v(" "),n("p",[n("button",{attrs:{id:"login-button"},on:{click:t.login}},[t._v("Login")])])])},x=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"login"}},[n("div",{attrs:{id:"user-profile-template"}}),t._v(" "),n("div",{attrs:{id:"user-profile"}}),t._v(" "),n("div",{attrs:{id:"oauth-template"}}),t._v(" "),n("div",{attrs:{id:"oauth"}})])}],k={render:y,staticRenderFns:x},b=k,M=n("VU/8"),z=s,w=M(_,b,!1,z,"data-v-51b9642c",null),I=w.exports,A=n("mtWM"),H=n.n(A),R={name:"moodSlider",data:function(){return{moods:{happy:{src:n("+Al0"),text:"happy"},love:{src:n("dyV4"),text:"love"},silly:{src:n("Zqf7"),text:"silly"},surprise:{src:n("rcH9"),text:"surprise"},cool:{src:n("/qur"),text:"cool"},sleepy:{src:n("izrj"),text:"sleepy"},meh:{src:n("6HYP"),text:"meh"},sad:{src:n("iC7B"),text:"sad"}}}},methods:{selectMood:function(t){this.$emit("selected",t.currentTarget.childNodes[0].alt)}}},E=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",t._l(t.moods,function(e){return n("ul",[n("li",{on:{click:t.selectMood}},[n("img",{attrs:{src:e.src,alt:e.text}}),t._v(" "),n("p",[t._v(t._s(e.text))])])])}))},q=[],T={render:E,staticRenderFns:q},U=T,B=n("VU/8"),L=r,V=B(R,U,!1,L,"data-v-7ba20139",null),$=V.exports,P={name:"Moodify",data:function(){return{results:[],lists:[],errors:[],query:"",access_token:this.$route.hash.substring(1)}},components:{"mood-slider":$},methods:{getPlaylist:function(t){var e=this;console.log(t),this.query=t;var n={headers:{Authorization:"Bearer ".concat(this.access_token)}},o="https://api.spotify.com/v1/search?type=playlist&q="+this.query,s=this;H.a.get(o,n).then(function(t){s.results=t.data.playlists.items,H.a.get(document.getElementById("playlistLink").innerHTML,n),console.log("stop here?")}).then(function(t){console.log("second function works"),s.lists=t.data.track.items}).catch(function(t){e.errors.push(t)})}}},C=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{attrs:{id:"loggedIn"}},[n("p",[t._v("Music for your Mood")]),t._v(" "),n("p",[t._v("This is a playlist based on "+t._s(t.query))]),t._v(" "),n("mood-slider",{on:{selected:t.getPlaylist}}),t._v(" "),t.results&&t.results.length>0?n("ul",t._l(t.results,function(e){return n("li",[n("p",[t._v(t._s(e.name))]),t._v(" "),n("p",{attrs:{id:"playlistLink"}},[t._v(t._s(e.tracks.href))]),t._v(" "),n("p",[t._v("There are "+t._s(e.tracks.total)+" tracks in this playlist.")]),t._v(" "),n("hr")])})):t._e(),t._v(" "),n("div",[t.lists&&t.lists.length>0?n("ul",t._l(t.lists,function(e){return n("li",[n("p",[t._v(t._s(e.name)+" - "+t._s(e.artists))])])})):t._e()])],1)])},S=[],F={render:C,staticRenderFns:S},N=F,j=n("VU/8"),Y=i,K=j(P,N,!1,Y,"data-v-71ad70c8",null),W=K.exports,Z={name:"Authorize",created:function(){console.log("Authorization token created")},data:function(){var t=location.hash.split("&").map(function(t){return t.split("=")}).reduce(function(t,e){return t[e[0]]=e[1],t},{}),e=t["#access_token"];return this.$router.push({path:"/moodify#"+e}),{}},methods:{}},J=function(){var t=this,e=t.$createElement;return(t._self._c||e)("div")},O=[],D={render:J,staticRenderFns:O},G=D,Q=n("VU/8"),X=Q(Z,G,!1,null,null,null),tt=X.exports;a.a.use(g.a);var et=new g.a({mode:"history",routes:[{path:"/",name:"Login",component:I},{path:"/moodify",name:"Moodify",component:W},{path:"/authorize",name:"Authorize",component:tt}]});a.a.config.productionTip=!1,new a.a({el:"#app",router:et,template:"<App/>",components:{App:v}})},Zqf7:function(t,e,n){t.exports=n.p+"static/img/silly.61b3572.png"},aKVN:function(t,e){},dyV4:function(t,e,n){t.exports=n.p+"static/img/love.531943f.png"},iC7B:function(t,e,n){t.exports=n.p+"static/img/sad.27b92c1.png"},izrj:function(t,e,n){t.exports=n.p+"static/img/sleepy.8f3694c.png"},mcsh:function(t,e){},rcH9:function(t,e,n){t.exports=n.p+"static/img/surprised.8dae223.png"},"x/0z":function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.e60218cca7ca18247715.js.map