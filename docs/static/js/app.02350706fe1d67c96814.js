webpackJsonp([1],{"38QS":function(e,t){},NHnr:function(e,t,o){"use strict";function n(e){o("x/0z")}function r(e){o("e+hj")}function a(e){o("38QS")}Object.defineProperty(t,"__esModule",{value:!0});var s=o("7+uW"),i={name:"App"},c=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"app"}},[o("router-view")],1)},u=[],l={render:c,staticRenderFns:u},d=l,h=o("VU/8"),p=n,m=h(i,d,!1,p,null,null),f=m.exports,v=o("/ocq"),g={name:"Login",data:function(){return{results:null,errors:[],access_token:this.$route.hash.substring(1)}},methods:{getHashParams:function(){for(var e,t={},o=/([^&;=]+)=?([^&;]*)/g,n=window.location.hash.substring(1);e=o.exec(n);)t[e[1]]=decodeURIComponent(e[2]);return t},generateRandomString:function(e){for(var t="",o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<e;n++)t+=o.charAt(Math.floor(Math.random()*o.length));return t},authorize:function(e){var t=this.generateRandomString(16);localStorage.setItem(e,t);var o="https://accounts.spotify.com/authorize";o+="?response_type=token",o+="&client_id="+encodeURIComponent("2acb1bf4bb054c3a9d24c0256833c1a7"),o+="&scope="+encodeURIComponent("user-read-private user-read-email"),o+="&redirect_uri="+encodeURIComponent("http://localhost:8080/#/moodify"),o+="&state="+encodeURIComponent(t),window.location=o},login:function(){var e="spotify_auth_state",t=this.getHashParams(),o=localStorage.getItem(e);this.access_token.length>0&&(null==t.state||t.state!==o)?alert("There was an error during the authentication"):(localStorage.removeItem(e),this.access_token.length>0?axios.get({url:"https://api.spotify.com/v1/me",headers:{Authorization:"Bearer "+access_token},success:function(e){userProfilePlaceholder.innerHTML=userProfileTemplate(e),this.mustLogin=!1,this.loggedIn=!0}}):(this.mustLogin=!0,this.loggedIn=!1)),this.authorize(e)}}},_=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("h1",[e._v("Moodify")]),e._v(" "),o("p",[e._v("Music to suit your mood.")]),e._v(" "),o("p",[e._v("You must log in to Spotify to use this app.")]),e._v(" "),o("p",[o("button",{attrs:{id:"login-button"},on:{click:e.login}},[e._v("Login")])])])},y=[],I={render:_,staticRenderFns:y},b=I,k=o("VU/8"),M=r,R=k(g,b,!1,M,"data-v-049aadea",null),w=R.exports,z=o("mtWM"),T=o.n(z),U={name:"Moodify",data:function(){return{results:null,errors:[],query:""}},methods:{login:function(){function e(e){for(var t="",o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<e;n++)t+=o.charAt(Math.floor(Math.random()*o.length));return t}var t="spotify_auth_state",o=(document.getElementById("user-profile-template").innerHTML,document.getElementById("user-profile")),n=(document.getElementById("oauth-template").innerHTML,document.getElementById("oauth"),function(){for(var e,t={},o=/([^&;=]+)=?([^&;]*)/g,n=window.location.hash.substring(1);e=o.exec(n);)t[e[1]]=decodeURIComponent(e[2]);return t}()),r=n.access_token,a=n.state,s=localStorage.getItem(t);if(!r||null!=a&&a===s){localStorage.removeItem(t),r?T.a.get({url:"https://api.spotify.com/v1/me",headers:{Authorization:"Bearer "+r},success:function(e){o.innerHTML=userProfileTemplate(e),this.mustLogin=!1,this.loggedIn=!0}}):(this.mustLogin=!0,this.loggedIn=!1);var i=function(){var o=e(16);localStorage.setItem(t,o);var n="https://accounts.spotify.com/authorize";n+="?response_type=token",n+="&client_id="+encodeURIComponent("2acb1bf4bb054c3a9d24c0256833c1a7"),n+="&scope="+encodeURIComponent("user-read-private user-read-email"),n+="&redirect_uri="+encodeURIComponent("http://localhost:8080/authorize"),n+="&state="+encodeURIComponent(o),window.location=n}}else alert("There was an error during the authentication");i()},getPlaylist:function(){var e=this;T.a.get("https://api.spotify.com/v1/search",{params:{q:this.query,type:"playlist"}}).then(function(t){e.results=t.data}).catch(function(t){e.errors.push(t)})}}},C=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[e._m(0),e._v(" "),o("div",{attrs:{id:"loggedIn"}},[o("p",[e._v("Music for your Mood")]),e._v(" "),o("p",[e._v("This is a playlist based on "+e._s(e.query))]),e._v(" "),o("form",{on:{submit:function(t){t.preventDefault(),e.getPlaylist(t)}}},[o("p",[e._v("I'm feeling like..."),o("input",{directives:[{name:"model",rawName:"v-model.lazy",value:e.query,expression:"query",modifiers:{lazy:!0}}],attrs:{type:"text",placeholder:"something"},domProps:{value:e.query},on:{change:function(t){e.query=t.target.value}}}),o("button",{attrs:{type:"submit"}},[e._v("Go")])])]),e._v(" "),e.results&&e.results.length>0?o("ul",e._l(e.results,function(t){return o("li",[o("p",[e._v(e._s(e.playlists.items.name))]),e._v(" "),o("p",[e._v(e._s(e.playlists.items.tracks))])])})):e._e()])])},x=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"login"}},[o("div",{attrs:{id:"user-profile-template"}}),e._v(" "),o("div",{attrs:{id:"user-profile"}}),e._v(" "),o("div",{attrs:{id:"oauth-template"}}),e._v(" "),o("div",{attrs:{id:"oauth"}})])}],L={render:C,staticRenderFns:x},S=L,q=o("VU/8"),A=a,P=q(U,S,!1,A,"data-v-644d01b6",null),E=P.exports,H={name:"Authorize",methods:{storeToken:function(){console.log("Caching access token."),this.accessToken=this.$route.query.access_token;var e=" access_token"+accessToken;this.$ls.set(e,36e5),console.log("Access token has been stored for 1 hour.")}}},B=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("p",[e._v("Congrats, you have been authorized.")]),e._v(" "),o("router-link",{attrs:{to:"/"},on:{click:e.storeToken}},[e._v("Give me music!")])],1)},$=[],F={render:B,staticRenderFns:$},V=F,j=o("VU/8"),N=j(H,V,!1,null,null,null),G=N.exports;s.a.use(v.a);var Q=new v.a({mode:"history",routes:[{path:"/",name:"Login",component:w},{path:"/moodify",name:"Moodify",component:E},{path:"/authorize",name:"Authorize",component:G}]});s.a.config.productionTip=!1,new s.a({el:"#app",router:Q,template:"<App/>",components:{App:f}})},"e+hj":function(e,t){},"x/0z":function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.02350706fe1d67c96814.js.map