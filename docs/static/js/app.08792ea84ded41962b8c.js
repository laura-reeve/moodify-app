webpackJsonp([1],{NHnr:function(t,e,n){"use strict";function o(t){n("x/0z")}function r(t){n("Ttih")}function a(t){n("RTQt")}Object.defineProperty(e,"__esModule",{value:!0});var i=n("7+uW"),s={name:"App"},c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},u=[],l={render:c,staticRenderFns:u},h=l,d=n("VU/8"),p=o,m=d(s,h,!1,p,null,null),f=m.exports,v=n("/ocq"),_={name:"Login",data:function(){return{results:null,errors:[],access_token:this.$route.hash.substring(1)}},methods:{getHashParams:function(){for(var t,e={},n=/([^&;=]+)=?([^&;]*)/g,o=window.location.hash.substring(1);t=n.exec(o);)e[t[1]]=decodeURIComponent(t[2]);return e},generateRandomString:function(t){for(var e="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",o=0;o<t;o++)e+=n.charAt(Math.floor(Math.random()*n.length));return e},authorize:function(t){var e=this.generateRandomString(16);localStorage.setItem(t,e);var n="https://accounts.spotify.com/authorize";n+="?response_type=token",n+="&client_id="+encodeURIComponent("2acb1bf4bb054c3a9d24c0256833c1a7"),n+="&scope="+encodeURIComponent("user-read-private user-read-email"),n+="&redirect_uri="+encodeURIComponent("http://localhost:8080/authorize"),n+="&state="+encodeURIComponent(e),window.location=n},login:function(){var t=(document.getElementById("user-profile-template").innerHTML,document.getElementById("user-profile")),e=(document.getElementById("oauth-template").innerHTML,document.getElementById("oauth"),"spotify_auth_state"),n=this.getHashParams(),o=localStorage.getItem(e);this.access_token.length>0&&(null==n.state||n.state!==o)?alert("There was an error during the authentication"):(localStorage.removeItem(e),this.access_token.length>0?axios.get({url:"https://api.spotify.com/v1/me",headers:{Authorization:"Bearer "+access_token},success:function(e){t.innerHTML=userProfileTemplate(e),window.location.replace("http://localhost:8080/authorize")}}):console.log("Authentication needed, retreiving access token.")),this.authorize(e)}}},g=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._m(0),t._v(" "),n("h1",[t._v("Moodify")]),t._v(" "),n("p",[t._v("Music to suit your mood.")]),t._v(" "),n("p",[t._v("You must log in to Spotify to use this app.")]),t._v(" "),n("p",[n("button",{attrs:{id:"login-button"},on:{click:t.login}},[t._v("Login")])])])},y=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"login"}},[n("div",{attrs:{id:"user-profile-template"}}),t._v(" "),n("div",{attrs:{id:"user-profile"}}),t._v(" "),n("div",{attrs:{id:"oauth-template"}}),t._v(" "),n("div",{attrs:{id:"oauth"}})])}],k={render:g,staticRenderFns:y},b=k,z=n("VU/8"),I=r,w=z(_,b,!1,I,"data-v-1b81c52c",null),M=w.exports,R=n("mtWM"),T=n.n(R),A={name:"Moodify",data:function(){return{results:[],errors:[],query:"",access_token:this.$route.hash.substring(1)}},methods:{getPlaylist:function(){var t=this,e={headers:{Authorization:"Bearer ".concat(this.access_token)}},n="https://api.spotify.com/v1/search?type=playlist&q="+this.query,o=this;T.a.get(n,e).then(function(t){o.results=t.data.playlists.items}).catch(function(e){t.errors.push(e)})},openPlaylist:function(){var t=this,e={headers:{Authorization:"Bearer ".concat(this.access_token)}},n=document.getElementById("playlistLink").innerHTML;T.a.get(n,e).then(function(e){window.location.replace(n.concat(t.access_token))}).catch(function(e){t.errors.push(e)})}}},x=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{attrs:{id:"loggedIn"}},[n("p",[t._v("Music for your Mood")]),t._v(" "),n("p",[t._v("This is a playlist based on "+t._s(t.query))]),t._v(" "),n("form",{on:{submit:function(e){e.preventDefault(),t.getPlaylist(e)}}},[n("p",[t._v("I'm feeling like..."),n("input",{directives:[{name:"model",rawName:"v-model.lazy",value:t.query,expression:"query",modifiers:{lazy:!0}}],attrs:{type:"text",placeholder:"something"},domProps:{value:t.query},on:{change:function(e){t.query=e.target.value}}}),n("button",{attrs:{type:"submit"}},[t._v("Go")])])]),t._v(" "),t.results&&t.results.length>0?n("ul",t._l(t.results,function(e){return n("li",[n("p",[t._v(t._s(e.name))]),t._v(" "),n("button",{attrs:{id:"playlistLink"},on:{click:function(e){t.openPlaylist()}}},[t._v(t._s(e.tracks.href))]),t._v(" "),n("p",[t._v("There are "+t._s(e.tracks.total)+" tracks in this playlist.")])])})):t._e()])])},E=[],q={render:x,staticRenderFns:E},L=q,P=n("VU/8"),U=a,B=P(A,L,!1,U,"data-v-95e625f6",null),H=B.exports,$={name:"Authorize",created:function(){console.log("Authorization token created")},data:function(){var t=location.hash.split("&").map(function(t){return t.split("=")}).reduce(function(t,e){return t[e[0]]=e[1],t},{}),e=t["#access_token"];return this.$router.push({path:"/moodify#"+e}),{}},methods:{}},S=function(){var t=this,e=t.$createElement;return(t._self._c||e)("div")},C=[],F={render:S,staticRenderFns:C},V=F,N=n("VU/8"),Q=N($,V,!1,null,null,null),W=Q.exports;i.a.use(v.a);var j=new v.a({mode:"history",routes:[{path:"/",name:"Login",component:M},{path:"/moodify",name:"Moodify",component:H},{path:"/authorize",name:"Authorize",component:W}]});i.a.config.productionTip=!1,new i.a({el:"#app",router:j,template:"<App/>",components:{App:f}})},RTQt:function(t,e){},Ttih:function(t,e){},"x/0z":function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.08792ea84ded41962b8c.js.map